-- Ninja Legends Script with Rayfield GUI
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- Create the main window
local Window = Rayfield:CreateWindow({
    Name = "Midnight Hub",
    LoadingTitle = "Ninja Legends Script",
    LoadingSubtitle = "by Midnight Hub",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "NinjaLegendsScript",
        FileName = "Configuration"
    }
})

-- Farming Tab
local FarmingTab = Window:CreateTab("Farming", 4483362458)

-- Farming Toggles
local AutoSwingToggle = FarmingTab:CreateToggle({
    Name = "Auto Swing",
    CurrentValue = false,
    Flag = "AutoSwing",
    Callback = function(Value)
        getgenv().AutoSwing = Value
    end
})

local AutoSellToggle = FarmingTab:CreateToggle({
    Name = "Auto Sell",
    CurrentValue = false,
    Flag = "AutoSell",
    Callback = function(Value)
        getgenv().AutoSell = Value
    end
})

local AutoGoodKarmaToggle = FarmingTab:CreateToggle({
    Name = "Auto Good Karma",
    CurrentValue = false,
    Flag = "AutoGoodKarma",
    Callback = function(Value)
        getgenv().AutoGoodKarma = Value
    end
})

local AutoBadKarmaToggle = FarmingTab:CreateToggle({
    Name = "Auto Bad Karma",
    CurrentValue = false,
    Flag = "AutoBadKarma",
    Callback = function(Value)
        getgenv().AutoBadKarma = Value
    end
})

-- Boss Auto Farming
local BossSection = FarmingTab:CreateSection("Boss Farming")

local RobotBossToggle = FarmingTab:CreateToggle({
    Name = "Auto Robot Boss",
    CurrentValue = false,
    Flag = "AutoRobotBoss",
    Callback = function(Value)
        getgenv().AutoRobotBoss = Value
    end
})

local EternalBossToggle = FarmingTab:CreateToggle({
    Name = "Auto Eternal Boss",
    CurrentValue = false,
    Flag = "AutoEternalBoss",
    Callback = function(Value)
        getgenv().AutoEternalBoss = Value
    end
})

local AncientBossToggle = FarmingTab:CreateToggle({
    Name = "Auto Ancient Boss",
    CurrentValue = false,
    Flag = "AutoAncientBoss",
    Callback = function(Value)
        getgenv().AutoAncientBoss = Value
    end
})

-- Auto Buy Tab
local AutoBuyTab = Window:CreateTab("Auto Buy", 4483362547)

local AutoSwordToggle = AutoBuyTab:CreateToggle({
    Name = "Auto Buy Swords",
    CurrentValue = false,
    Flag = "AutoSword",
    Callback = function(Value)
        getgenv().AutoSword = Value
    end
})

local AutoBeltToggle = AutoBuyTab:CreateToggle({
    Name = "Auto Buy Belts",
    CurrentValue = false,
    Flag = "AutoBelt",
    Callback = function(Value)
        getgenv().AutoBelt = Value
    end
})

local AutoRankToggle = AutoBuyTab:CreateToggle({
    Name = "Auto Buy Ranks",
    CurrentValue = false,
    Flag = "AutoRank",
    Callback = function(Value)
        getgenv().AutoRank = Value
    end
})

-- Pets Tab
local PetsTab = Window:CreateTab("Pets", 4483362331)

local EggDropdown = PetsTab:CreateDropdown({
    Name = "Select Egg",
    Options = {
        "Blue Crystal", "Purple Crystal", "Orange Crystal", 
        "Enchanted Crystal", "Astral Crystal", "Golden Crystal",
        "Inferno Crystal", "Galaxy Crystal", "Frozen Crystal",
        "Eternal Crystal", "Storm Crystal", "Thunder Crystal",
        "Legends Crystal", "Eternity Crystal"
    },
    CurrentOption = "Blue Crystal",
    Flag = "EggSelection",
    Callback = function(Option)
        getgenv().SelectedEgg = Option
    end
})

local AutoEggToggle = PetsTab:CreateToggle({
    Name = "Auto Open Eggs",
    CurrentValue = false,
    Flag = "AutoEgg",
    Callback = function(Value)
        getgenv().AutoEgg = Value
    end
})

local AutoEvolveToggle = PetsTab:CreateToggle({
    Name = "Auto Evolve Pets",
    CurrentValue = false,
    Flag = "AutoEvolve",
    Callback = function(Value)
        getgenv().AutoEvolve = Value
    end
})

-- Teleport Tab
local TeleportTab = Window:CreateTab("Teleports", 4483362150)

local IslandSection = TeleportTab:CreateSection("Islands")

local TeleportButtons = {
    {"Enchanted Island", "Enchanted Island"},
    {"Astral Island", "Astral Island"},
    {"Mystical Island", "Mystical Island"},
    {"Space Island", "Space Island"},
    {"Tundra Island", "Tundra Island"},
    {"Eternal Island", "Eternal Island"},
    {"Sandstorm Island", "Sandstorm"},
    {"Thunderstorm Island", "Thunderstorm"}
}

for _, teleport in ipairs(TeleportButtons) do
    TeleportTab:CreateButton({
        Name = "Teleport to " .. teleport[1],
        Callback = function()
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = 
            game:GetService("Workspace").islandUnlockParts[teleport[2]].CFrame
        end
    })
end

-- Anti-Idle Script
local VirtualUser = game:GetService('VirtualUser')
game:GetService('Players').LocalPlayer.Idled:connect(function()
    VirtualUser:Button2Down(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
    wait(1)
    VirtualUser:Button2Up(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
end)

-- Main Automation Threads
spawn(function()
    while true do
        if getgenv().AutoSwing then
            -- Auto Swing Logic
            if game.Players.LocalPlayer.Character:FindFirstChildOfClass("Tool") then
                game.Players.LocalPlayer.ninjaEvent:FireServer("swingKatana")
            end
        end
        wait(0.1)
    end
end)

spawn(function()
    while true do
        if getgenv().AutoSell then
            -- Auto Sell Logic
            local sellCircle = game.workspace.sellAreaCircles["sellAreaCircle7"].circleInner
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = sellCircle.CFrame
        end
        wait(0.5)
    end
end)

spawn(function()
    while true do
        if getgenv().AutoEgg then
            -- Auto Egg Opening Logic
            game:GetService("ReplicatedStorage").rEvents.openCrystalRemote:InvokeServer(
                "openCrystal", 
                getgenv().SelectedEgg or "Blue Crystal"
            )
        end
        wait(1)
    end
end)

Rayfield:LoadConfiguration()
Rayfield:Notify({
    Title = "Script Loaded",
    Content = "Ninja Legends Script is now running!",
    Duration = 6,
    Image = 4483362458
})
